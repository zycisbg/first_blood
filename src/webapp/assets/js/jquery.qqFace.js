d_dic.put("Expression_1@2x.png","微笑");
d_dic.put("Expression_2@2x.png","撇嘴");
d_dic.put("Expression_3@2x.png","色");
d_dic.put("Expression_4@2x.png","发呆");
d_dic.put("Expression_5@2x.png","得意");
d_dic.put("Expression_6@2x.png","流泪");
d_dic.put("Expression_7@2x.png","害羞");
d_dic.put("Expression_8@2x.png","闭嘴");
d_dic.put("Expression_9@2x.png","睡");
d_dic.put("Expression_10@2x.png","大哭");
d_dic.put("Expression_11@2x.png","尴尬");
d_dic.put("Expression_12@2x.png","发怒");
d_dic.put("Expression_13@2x.png","调皮");
d_dic.put("Expression_14@2x.png","呲牙");
d_dic.put("Expression_15@2x.png","惊讶");
d_dic.put("Expression_16@2x.png","难过");
d_dic.put("Expression_17@2x.png","酷");
d_dic.put("Expression_18@2x.png","冷汗");
d_dic.put("Expression_19@2x.png","抓狂");
d_dic.put("Expression_20@2x.png","吐");
d_dic.put("Expression_21@2x.png","偷笑");
d_dic.put("Expression_22@2x.png","愉快");
d_dic.put("Expression_23@2x.png","白眼");
d_dic.put("Expression_24@2x.png","傲慢");
d_dic.put("Expression_25@2x.png","饥饿");
d_dic.put("Expression_26@2x.png","困");
d_dic.put("Expression_27@2x.png","惊恐");
d_dic.put("Expression_28@2x.png","流汗");
d_dic.put("Expression_29@2x.png","憨笑");
d_dic.put("Expression_30@2x.png","悠闲");
d_dic.put("Expression_31@2x.png","奋斗");
d_dic.put("Expression_32@2x.png","咒骂");
d_dic.put("Expression_33@2x.png","疑问");
d_dic.put("Expression_34@2x.png","嘘");
d_dic.put("Expression_35@2x.png","晕");
d_dic.put("Expression_36@2x.png","疯了");
d_dic.put("Expression_37@2x.png","衰");
d_dic.put("Expression_38@2x.png","骷髅");
d_dic.put("Expression_39@2x.png","敲打");
d_dic.put("Expression_40@2x.png","再见");
d_dic.put("Expression_41@2x.png","擦汗");
d_dic.put("Expression_42@2x.png","抠鼻");
d_dic.put("Expression_43@2x.png","鼓掌");
d_dic.put("Expression_44@2x.png","糗大了");
d_dic.put("Expression_45@2x.png","坏笑");
d_dic.put("Expression_46@2x.png","左哼哼");
d_dic.put("Expression_47@2x.png","右哼哼");
d_dic.put("Expression_48@2x.png","哈欠");
d_dic.put("Expression_49@2x.png","鄙视");
d_dic.put("Expression_50@2x.png","委屈");
d_dic.put("Expression_51@2x.png","快哭了");
d_dic.put("Expression_52@2x.png","阴险");
d_dic.put("Expression_53@2x.png","亲亲");
d_dic.put("Expression_54@2x.png","吓");
d_dic.put("Expression_55@2x.png","可怜");
d_dic.put("Expression_56@2x.png","菜刀");
d_dic.put("Expression_57@2x.png","西瓜");
d_dic.put("Expression_58@2x.png","啤酒");
d_dic.put("Expression_59@2x.png","篮球");
d_dic.put("Expression_60@2x.png","乒乓");
d_dic.put("Expression_61@2x.png","咖啡");
d_dic.put("Expression_62@2x.png","饭");
d_dic.put("Expression_63@2x.png","猪头");
d_dic.put("Expression_64@2x.png","玫瑰");
d_dic.put("Expression_65@2x.png","凋谢");
d_dic.put("Expression_66@2x.png","嘴唇");
d_dic.put("Expression_67@2x.png","爱心");
d_dic.put("Expression_68@2x.png","心碎");
d_dic.put("Expression_69@2x.png","蛋糕");
d_dic.put("Expression_70@2x.png","闪电");
d_dic.put("Expression_71@2x.png","炸弹");
d_dic.put("Expression_72@2x.png","刀");
d_dic.put("Expression_73@2x.png","足球");
d_dic.put("Expression_74@2x.png","瓢虫");
d_dic.put("Expression_75@2x.png","便便");
d_dic.put("Expression_76@2x.png","月亮");
d_dic.put("Expression_77@2x.png","太阳");
d_dic.put("Expression_78@2x.png","礼物");
d_dic.put("Expression_79@2x.png","拥抱");
d_dic.put("Expression_80@2x.png","强");
d_dic.put("Expression_81@2x.png","弱");
d_dic.put("Expression_82@2x.png","握手");
d_dic.put("Expression_83@2x.png","胜利");
d_dic.put("Expression_84@2x.png","抱拳");
d_dic.put("Expression_85@2x.png","勾引");
d_dic.put("Expression_86@2x.png","拳头");
d_dic.put("Expression_87@2x.png","差劲");
d_dic.put("Expression_88@2x.png","爱你");
d_dic.put("Expression_89@2x.png","NO");
d_dic.put("Expression_90@2x.png","OK");
d_dic.put("Expression_91@2x.png","爱情");
d_dic.put("Expression_92@2x.png","飞吻");
d_dic.put("Expression_93@2x.png","跳跳");
d_dic.put("Expression_94@2x.png","发抖");
d_dic.put("Expression_95@2x.png","怄火");
d_dic.put("Expression_96@2x.png","转圈");
d_dic.put("Expression_97@2x.png","磕头");
d_dic.put("Expression_98@2x.png","回头");
d_dic.put("Expression_99@2x.png","跳绳");
d_dic.put("Expression_100@2x.png","投降");

//反向
d_dic.put("[微笑]","Expression_1@2x.png");
d_dic.put("[撇嘴]","Expression_2@2x.png");
d_dic.put("[色]","Expression_3@2x.png");
d_dic.put("[发呆]","Expression_4@2x.png");
d_dic.put("[得意]","Expression_5@2x.png");
d_dic.put("[流泪]","Expression_6@2x.png");
d_dic.put("[害羞]","Expression_7@2x.png");
d_dic.put("[闭嘴]","Expression_8@2x.png");
d_dic.put("[睡]","Expression_9@2x.png");
d_dic.put("[大哭]","Expression_10@2x.png");
d_dic.put("[尴尬]","Expression_11@2x.png");
d_dic.put("[发怒]","Expression_12@2x.png");
d_dic.put("[调皮]","Expression_13@2x.png");
d_dic.put("[呲牙]","Expression_14@2x.png");
d_dic.put("[惊讶]","Expression_15@2x.png");
d_dic.put("[难过]","Expression_16@2x.png");
d_dic.put("[酷]","Expression_17@2x.png");
d_dic.put("[冷汗]","Expression_18@2x.png");
d_dic.put("[抓狂]","Expression_19@2x.png");
d_dic.put("[吐]","Expression_20@2x.png");
d_dic.put("[偷笑]","Expression_21@2x.png");
d_dic.put("[愉快]","Expression_22@2x.png");
d_dic.put("[白眼]","Expression_23@2x.png");
d_dic.put("[傲慢]","Expression_24@2x.png");
d_dic.put("[饥饿]","Expression_25@2x.png");
d_dic.put("[困]","Expression_26@2x.png");
d_dic.put("[惊恐]","Expression_27@2x.png");
d_dic.put("[流汗]","Expression_28@2x.png");
d_dic.put("[憨笑]","Expression_29@2x.png");
d_dic.put("[悠闲]","Expression_30@2x.png");
d_dic.put("[奋斗]","Expression_31@2x.png");
d_dic.put("[咒骂]","Expression_32@2x.png");
d_dic.put("[疑问]","Expression_33@2x.png");
d_dic.put("[嘘]","Expression_34@2x.png");
d_dic.put("[晕]","Expression_35@2x.png");
d_dic.put("[疯了]","Expression_36@2x.png");
d_dic.put("[衰]","Expression_37@2x.png");
d_dic.put("[骷髅]","Expression_38@2x.png");
d_dic.put("[敲打]","Expression_39@2x.png");
d_dic.put("[再见]","Expression_40@2x.png");
d_dic.put("[擦汗]","Expression_41@2x.png");
d_dic.put("[抠鼻]","Expression_42@2x.png");
d_dic.put("[鼓掌]","Expression_43@2x.png");
d_dic.put("[糗大了]","Expression_44@2x.png");
d_dic.put("[坏笑]","Expression_45@2x.png");
d_dic.put("[左哼哼]","Expression_46@2x.png");
d_dic.put("[右哼哼]","Expression_47@2x.png");
d_dic.put("[哈欠]","Expression_48@2x.png");
d_dic.put("[鄙视]","Expression_49@2x.png");
d_dic.put("[委屈]","Expression_50@2x.png");
d_dic.put("[快哭了]","Expression_51@2x.png");
d_dic.put("[阴险]","Expression_52@2x.png");
d_dic.put("[亲亲]","Expression_53@2x.png");
d_dic.put("[吓]","Expression_54@2x.png");
d_dic.put("[可怜]","Expression_55@2x.png");
d_dic.put("[菜刀]","Expression_56@2x.png");
d_dic.put("[西瓜]","Expression_57@2x.png");
d_dic.put("[啤酒]","Expression_58@2x.png");
d_dic.put("[篮球]","Expression_59@2x.png");
d_dic.put("[乒乓]","Expression_60@2x.png");
d_dic.put("[咖啡]","Expression_61@2x.png");
d_dic.put("[饭]","Expression_62@2x.png");
d_dic.put("[猪头]","Expression_63@2x.png");
d_dic.put("[玫瑰]","Expression_64@2x.png");
d_dic.put("[凋谢]","Expression_65@2x.png");
d_dic.put("[嘴唇]","Expression_66@2x.png");
d_dic.put("[爱心]","Expression_67@2x.png");
d_dic.put("[心碎]","Expression_68@2x.png");
d_dic.put("[蛋糕]","Expression_69@2x.png");
d_dic.put("[闪电]","Expression_70@2x.png");
d_dic.put("[炸弹]","Expression_71@2x.png");
d_dic.put("[刀]","Expression_72@2x.png");
d_dic.put("[足球]","Expression_73@2x.png");
d_dic.put("[瓢虫]","Expression_74@2x.png");
d_dic.put("[便便]","Expression_75@2x.png");
d_dic.put("[月亮]","Expression_76@2x.png");
d_dic.put("[太阳]","Expression_77@2x.png");
d_dic.put("[礼物]","Expression_78@2x.png");
d_dic.put("[拥抱]","Expression_79@2x.png");
d_dic.put("[强]","Expression_80@2x.png");
d_dic.put("[弱]","Expression_81@2x.png");
d_dic.put("[握手]","Expression_82@2x.png");
d_dic.put("[胜利]","Expression_83@2x.png");
d_dic.put("[抱拳]","Expression_84@2x.png");
d_dic.put("[勾引]","Expression_85@2x.png");
d_dic.put("[拳头]","Expression_86@2x.png");
d_dic.put("[差劲]","Expression_87@2x.png");
d_dic.put("[爱你]","Expression_88@2x.png");
d_dic.put("[NO]","Expression_89@2x.png");
d_dic.put("[OK]","Expression_90@2x.png");
d_dic.put("[爱情]","Expression_91@2x.png");
d_dic.put("[飞吻]","Expression_92@2x.png");
d_dic.put("[跳跳]","Expression_93@2x.png");
d_dic.put("[发抖]","Expression_94@2x.png");
d_dic.put("[怄火]","Expression_95@2x.png");
d_dic.put("[转圈]","Expression_96@2x.png");
d_dic.put("[磕头]","Expression_97@2x.png");
d_dic.put("[回头]","Expression_98@2x.png");
d_dic.put("[跳绳]","Expression_99@2x.png");
d_dic.put("[投降]","Expression_100@2x.png");
var path;
// QQ表情插件
(function($){  
	$.fn.qqFace = function(options){
		var defaults = {
			id : 'facebox',
			path : 'face/',
			assign : 'content',
			tip : ''
		};
		var option = $.extend(defaults, options);
		var assign = $('#'+option.assign);
		var id = option.id;
		path = option.path;
		var tip = option.tip;
		
		if(assign.length<=0){
//			alert('缺少表情赋值对象。');
			return false;
		}
		
		$(this).click(function(e){
			var strFace, labFace;
			if($('#'+id).length<=0){
				strFace = '<div id="'+id+'" style="position:absolute;display:none;z-index:1000;" class="qqFace">' +
							  '<table border="0" cellspacing="0" cellpadding="0" style="margin-top: 0px;"><tr>';
				for(var i=1; i<=100; i++){
					var name = d_dic.get("Expression_"+i+"@2x.png");
					labFace = '['+tip+name+']';
					strFace += '<td><img width="40px" height="40px" src="'+path+"Expression_"+i+'@2x.png" onclick="$(\'#'+option.assign+'\').setCaret();$(\'#'+option.assign+'\').insertAtCaret(\'' + labFace + '\');" /></td>';
					if( i % 18 == 0 ) strFace += '</tr><tr>';
				}
				strFace += '</tr></table></div>';
			}
			$(this).parent().append(strFace);
			var offset = $(this).position();
			var top = offset.top + $(this).outerHeight();
			$('#'+id).css('top',top);
			$('#'+id).css('left',offset.left);
			$('#'+id).show();
			e.stopPropagation();
		});

		$(document).click(function(){
			$('#'+id).hide();
			$('#'+id).remove();
		});
	};

})(jQuery);

jQuery.extend({ 
unselectContents: function(){ 
	if(window.getSelection) 
		window.getSelection().removeAllRanges(); 
	else if(document.selection) 
		document.selection.empty(); 
	} 
}); 
jQuery.fn.extend({ 
	selectContents: function(){ 
		$(this).each(function(i){ 
			var node = this; 
			var selection, range, doc, win; 
			if ((doc = node.ownerDocument) && (win = doc.defaultView) && typeof win.getSelection != 'undefined' && typeof doc.createRange != 'undefined' && (selection = window.getSelection()) && typeof selection.removeAllRanges != 'undefined'){ 
				range = doc.createRange(); 
				range.selectNode(node); 
				if(i == 0){ 
					selection.removeAllRanges(); 
				} 
				selection.addRange(range); 
			} else if (document.body && typeof document.body.createTextRange != 'undefined' && (range = document.body.createTextRange())){ 
				range.moveToElementText(node); 
				range.select(); 
			} 
		}); 
	}, 

	setCaret: function(){ 
		//if(!$.browser.msie) return; 
		var initSetCaret = function(){ 
			var textObj = $(this).get(0); 
			//textObj.caretPos = document.selection.createRange().duplicate(); 
		}; 
		$(this).click(initSetCaret).select(initSetCaret).keyup(initSetCaret); 
	}, 

	insertAtCaret: function(textFeildValue){ 
		var textObj = $(this).get(0); 
		if(document.all && textObj.createTextRange && textObj.caretPos){ 
			var caretPos=textObj.caretPos; 
			caretPos.text = caretPos.text.charAt(caretPos.text.length-1) == '' ? 
			textFeildValue+'' : textFeildValue; 
		} else if(textObj.setSelectionRange){ 
			var rangeStart=textObj.selectionStart; 
			var rangeEnd=textObj.selectionEnd; 
			var tempStr1=textObj.value.substring(0,rangeStart); 
			var tempStr2=textObj.value.substring(rangeEnd); 
			//textFeildValue = '<img width="30px" height="30px" src="'path+d_dic.get(textFeildValue)+'">';
			textObj.value=tempStr1+textFeildValue+tempStr2; 
			textObj.focus(); 
			var len=textFeildValue.length; 
			textObj.setSelectionRange(rangeStart+len,rangeStart+len); 
			textObj.blur(); 
		}else{ 
			textObj.value+=textFeildValue; 
		} 
	} 
});
//替换
function AnalyticEmotion(s) {
	if(typeof (s) != "undefined") {
		var sArr = s.match(/\[.*?\]/g);
		if(sArr!=null){
			for(var i = 0; i < sArr.length; i++){
				if(d_dic.get(sArr[i])!=-1) {
					var reStr = "<img src=\""+ path + d_dic.get(sArr[i]) + "\" height=\"30\" width=\"30\" />";
					s = s.replace(sArr[i], reStr);
				}
			}
		}
	}
	return s;
}
